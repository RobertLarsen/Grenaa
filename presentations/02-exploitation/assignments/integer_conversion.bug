#define MAX_USERS_PER_CHUNK 8

typedef struct {
    char name[32];
    time_t birthdate;
    enum { MALE, FEMALE } gender;
} user_t;

void handle_client(int socket) {
    user_t users[MAX_USERS_PER_CHUNK];
    int num_users;

    read(socket, &num_users, sizeof(num_users));
    if (num_users <= MAX_USERS_PER_CHUNK) {
        read(socket, users, num_users * sizeof(user_t));
        /* Do stuff with users */
    }
}
